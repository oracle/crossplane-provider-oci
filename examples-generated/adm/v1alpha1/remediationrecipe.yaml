apiVersion: adm.oci.upbound.io/v1alpha1
kind: RemediationRecipe
metadata:
  annotations:
    meta.upbound.io/example-id: adm/v1alpha1/remediationrecipe
  labels:
    testing.upbound.io/example-name: test_remediation_recipe
  name: test-remediation-recipe
spec:
  forProvider:
    compartmentId: ${var.compartment_id}
    definedTags:
      foo-namespace.bar-key: value
    detectConfiguration:
    - exclusions: ${var.remediation_recipe_detect_configuration_exclusions}
      maxPermissibleCvssV2Score: ${var.remediation_recipe_detect_configuration_max_permissible_cvss_v2score}
      maxPermissibleCvssV3Score: ${var.remediation_recipe_detect_configuration_max_permissible_cvss_v3score}
      maxPermissibleSeverity: ${var.remediation_recipe_detect_configuration_max_permissible_severity}
      upgradePolicy: ${var.remediation_recipe_detect_configuration_upgrade_policy}
    displayName: ${var.remediation_recipe_display_name}
    freeformTags:
      bar-key: value
    isRunTriggeredOnKbChange: ${var.remediation_recipe_is_run_triggered_on_kb_change}
    knowledgeBaseId: ${oci_adm_knowledge_base.test_knowledge_base.id}
    networkConfiguration:
    - nsgIds: ${var.remediation_recipe_network_configuration_nsg_ids}
      subnetId: ${oci_core_subnet.test_subnet.id}
    scmConfiguration:
    - branch: ${var.remediation_recipe_scm_configuration_branch}
      buildFileLocation: ${var.remediation_recipe_scm_configuration_build_file_location}
      externalScmType: ${var.remediation_recipe_scm_configuration_external_scm_type}
      isAutomergeEnabled: ${var.remediation_recipe_scm_configuration_is_automerge_enabled}
      ociCodeRepositoryId: ${oci_artifacts_repository.test_repository.id}
      patSecretId: ${oci_vault_secret.test_secret.id}
      repositoryUrl: ${var.remediation_recipe_scm_configuration_repository_url}
      scmType: ${var.remediation_recipe_scm_configuration_scm_type}
      username: ${var.remediation_recipe_scm_configuration_username}
    verifyConfiguration:
    - additionalParameters: ${var.remediation_recipe_verify_configuration_additional_parameters}
      buildServiceType: ${var.remediation_recipe_verify_configuration_build_service_type}
      jenkinsUrl: ${var.remediation_recipe_verify_configuration_jenkins_url}
      jobName: ${oci_database_migration_job.test_job.name}
      patSecretId: ${oci_vault_secret.test_secret.id}
      pipelineId: ${oci_datascience_pipeline.test_pipeline.id}
      repositoryUrl: ${var.remediation_recipe_verify_configuration_repository_url}
      triggerSecretId: ${oci_vault_secret.test_secret.id}
      username: ${var.remediation_recipe_verify_configuration_username}
      workflowName: ${var.remediation_recipe_verify_configuration_workflow_name}
