apiVersion: database.oci.upbound.io/v1alpha1
kind: DatabaseResource
metadata:
  annotations:
    meta.upbound.io/example-id: database/v1alpha1/databaseresource
  labels:
    testing.upbound.io/example-name: test_database
  name: test-database
spec:
  forProvider:
    database:
    - adminPasswordSecretRef:
        key: example-key
        name: example-secret
        namespace: upbound-system
      backupId: ${oci_database_backup.test_backup.id}
      backupTdePasswordSecretRef:
        key: example-key
        name: example-secret
        namespace: upbound-system
      characterSet: ${var.database_database_character_set}
      databaseSoftwareImageId: ${oci_database_database_software_image.test_database_software_image.id}
      dbBackupConfig:
      - autoBackupEnabled: ${var.database_database_db_backup_config_auto_backup_enabled}
        autoBackupWindow: ${var.database_database_db_backup_config_auto_backup_window}
        autoFullBackupDay: ${var.database_database_db_backup_config_auto_full_backup_day}
        autoFullBackupWindow: ${var.database_database_db_backup_config_auto_full_backup_window}
        backupDeletionPolicy: ${var.database_database_db_backup_config_backup_deletion_policy}
        backupDestinationDetails:
        - dbrsPolicyId: ${oci_identity_policy.test_policy.id}
          id: ${var.database_database_db_backup_config_backup_destination_details_id}
          isRemote: ${var.database_database_db_backup_config_backup_destination_details_is_remote}
          remoteRegion: ${var.database_database_db_backup_config_backup_destination_details_remote_region}
          type: ${var.database_database_db_backup_config_backup_destination_details_type}
        recoveryWindowInDays: ${var.database_database_db_backup_config_recovery_window_in_days}
        runImmediateFullBackup: ${var.database_database_db_backup_config_run_immediate_full_backup}
      dbName: ${var.database_database_db_name}
      dbUniqueName: ${var.database_database_db_unique_name}
      dbWorkload: ${var.database_database_db_workload}
      definedTags: ${var.database_database_defined_tags}
      encryptionKeyLocationDetails:
      - azureEncryptionKeyId: ${oci_kms_key.test_key.id}
        hsmPasswordSecretRef:
          key: example-key
          name: example-secret
          namespace: upbound-system
        providerType: ${var.database_database_encryption_key_location_details_provider_type}
      freeformTags: ${var.database_database_freeform_tags}
      isActiveDataGuardEnabled: ${var.database_database_is_active_data_guard_enabled}
      key_store_id: ${oci_database_key_store.test_key_store.id}
      kmsKeyId: ${oci_kms_key.test_key.id}
      kmsKeyVersionId: ${oci_kms_key_version.test_key_version.id}
      ncharacterSet: ${var.database_database_ncharacter_set}
      pdbName: ${var.database_database_pdb_name}
      pluggableDatabases: ${var.database_database_pluggable_databases}
      protectionMode: ${var.database_database_protection_mode}
      sidPrefix: ${var.database_database_sid_prefix}
      sourceDatabaseId: ${oci_database_database.test_database.id}
      sourceEncryptionKeyLocationDetails:
      - azure_encryption_key_id: ${oci_kms_key.test_key.id}
        hsmPasswordSecretRef:
          key: example-key
          name: example-secret
          namespace: upbound-system
        providerType: ${var.database_database_source_encryption_key_location_details_provider_type}
      sourceTdeWalletPasswordSecretRef:
        key: example-key
        name: example-secret
        namespace: upbound-system
      tdeWalletPasswordSecretRef:
        key: example-key
        name: example-secret
        namespace: upbound-system
      transportType: ${var.database_database_transport_type}
      vaultId: ${oci_kms_vault.test_vault.id}
    dbHomeId: ${oci_database_db_home.test_db_home.id}
    dbVersion: ${var.database_db_version}
    kmsKeyId: ${oci_kms_key.test_key.id}
    kmsKeyVersionId: ${oci_kms_key_version.test_key_version.id}
    source: ${var.database_source}
