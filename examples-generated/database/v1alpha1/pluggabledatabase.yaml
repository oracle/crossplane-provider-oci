apiVersion: database.oci.upbound.io/v1alpha1
kind: PluggableDatabase
metadata:
  annotations:
    meta.upbound.io/example-id: database/v1alpha1/pluggabledatabase
  labels:
    testing.upbound.io/example-name: test_pluggable_database
  name: test-pluggable-database
spec:
  forProvider:
    containerDatabaseAdminPasswordSecretRef:
      key: example-key
      name: example-secret
      namespace: upbound-system
    containerDatabaseIdSelector:
      matchLabels:
        testing.upbound.io/example-name: test_database
    definedTags: ${var.pluggable_database_defined_tags}
    freeformTags:
      Department: Finance
    kmsKeyVersionId: ${oci_kms_key_version.test_key_version.id}
    pdbAdminPasswordSecretRef:
      key: example-key
      name: example-secret
      namespace: upbound-system
    pdbCreationTypeDetails:
    - creationType: ${var.pluggable_database_pdb_creation_type_details_creation_type}
      dblinkUserPasswordSecretRef:
        key: example-key
        name: example-secret
        namespace: upbound-system
      dblinkUsername: ${var.pluggable_database_pdb_creation_type_details_dblink_username}
      isThinClone: ${var.pluggable_database_pdb_creation_type_details_is_thin_clone}
      refreshableCloneDetails:
      - isRefreshableClone: ${var.pluggable_database_pdb_creation_type_details_refreshable_clone_details_is_refreshable_clone}
      sourceContainerDatabaseAdminPasswordSecretRef:
        key: example-key
        name: example-secret
        namespace: upbound-system
      sourcePluggableDatabaseId: ${oci_database_pluggable_database.test_pluggable_database.id}
    pdbName: ${var.pluggable_database_pdb_name}
    shouldCreatePdbBackup: ${var.pluggable_database_should_create_pdb_backup}
    shouldPdbAdminAccountBeLocked: ${var.pluggable_database_should_pdb_admin_account_be_locked}
    tdeWalletPasswordSecretRef:
      key: example-key
      name: example-secret
      namespace: upbound-system
